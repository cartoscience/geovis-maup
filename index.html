<!DOCTYPE html>
<html>
	
<head>
  <title>productivity-trends</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  
  // <!-- Leaflet tutorial thanks to https://github.com/JackDougherty/leaflet-map-simple -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
  integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
  crossorigin=""/>
  
  // <!-- Leaflet source -->
  <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
  integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
  crossorigin=""></script>
	
  // <!-- Ribbon thanks to https://github.com/simonwhitaker/github-fork-ribbon-css --> 	
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.2/gh-fork-ribbon.min.css" />
  
  // <!-- Raster integration thanks to https://github.com/stuartmatthews/leaflet-geotiff -->
  <script src="https://stuartmatthews.github.io/leaflet-geotiff/vendor/geotiff.js"></script>
  <script src="https://stuartmatthews.github.io/leaflet-geotiff/vendor/geotiff.js"></script>
  <script src="https://stuartmatthews.github.io/leaflet-geotiff/leaflet-geotiff.js"></script>
  
  // <!-- Color integration thanks to https://github.com/gka/chroma.js/ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/1.3.0/chroma.min.js"></script>
  
  // <!-- Raster display thanks to https://github.com/IHCantabria/Leaflet.CanvasLayer.Field -->
  <script src= "https://ihcantabria.github.io/Leaflet.CanvasLayer.Field/dist/leaflet.canvaslayer.field.js"></script>
	
  <style>
  body { margin:0; padding:0; }
  #map { position: absolute; top:0; bottom:0; right:0; left:0; }
  .github-fork-ribbon.right-top:before {
            background-color: #454545; 
  }
  .github-fork-ribbon.right-top:after {
            color: #dbdbdb; 
	    border-width: 0; 
	    text-shadow: 0 -.00em rgba(0, 0, 0, 0.5);
  }
  </style>
	
</head>
	
<body>
  <div id="map"></div>
  <a class="github-fork-ribbon right-top" href="https://cartoscience.com" data-ribbon="cartoscience.com" title="cartoscience.com">cartoscience.com</a>
  <script>
  
  var map = L.map('map', {
    	center: [-13.247462, 34.308100], 
    	zoom: 7,  
    	scrollWheelZoom: true
  });
  
  // <!-- Imagery tiles thanks to https://github.com/leaflet-extras/leaflet-providers --> 
  var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community; Map details: Peter, B. G., Messina, J., and Snapp, S. 2018. A multi-scalar approach to mapping marginal agricultural land: smallholder agriculture in Malawi. Annals of the American Association of Geographers 108(4):989â€“1005.',
  	minZoom: 2,
	maxZoom: 12
  }).addTo(map);	  
  
  /*
  var imageUrl = './images/mw_cntry_tnspt.png',
	imageBounds = [[-17.140378, 32.6752898], [-9.354546, 35.940911]];
  L.imageOverlay(imageUrl, imageBounds).addTo(map);
  */
 
  var raster = L.leafletGeotiff(url='/images/mwc_ea_pt_4326.tif',options={}).addTo(map);
	  
  /*
  var img = L.ScalarField.fromGeoTiff(raster);
  var layer = L.canvasLayer.scalarField(img, {
	  color: chroma.scale('RdPu').domain(img.range),
	  opacity:0.65
  }).addTo(Map);
  layer.on('click', function (e) {
	  if (e.value !== null) {
		  var v = e.value.toFixed(0);
		  var html = (`<span class="popupText">Category ${v} m</span>`);
		  var popup = L.popup()
		  	.setLatLng(e.latlng)
		  	.setContent(html)
		  	.openOn(map);
	  }
  });
  L.control.layers({layer},{},{position: 'bottomleft', collapsed: false}).addTo(map);
  */
  
  </script>
	
</body>
	
</html>
